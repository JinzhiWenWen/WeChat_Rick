webpackJsonp([19],{"7DO7":function(e,t){},"i+br":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("4YfN"),n=i.n(a),s=i("qqdu"),c=i("R4Sj"),o={data:function(){return{cardPic:[],cardFile:[],isTwo:!0,upBtn:!0}},watch:{cardPic:function(e,t){e.length>=2?(this.isTwo=!1,this.upBtn=!1):(this.isTwo=!0,this.upBtn=!0)}},computed:n()({},Object(c.c)(["userMes"])),mounted:function(){console.log(this.userMes)},methods:{upCardIs:function(e){var t=this,i=e.target.files[0],a=new FileReader;a.readAsDataURL(i);var n=new Image;a.onload=function(e){var i=document.createElement("canvas"),a=i.getContext("2d");n.src=this.result,n.onload=function(){i.width=400,i.height=n.height/n.width*400,a.drawImage(n,0,0,i.width,i.height),n.src=i.toDataURL("image/png",.1)},t.cardPic.push(n.src)},this.cardFile.push(e.target.files[0])},delCard:function(e){this.cardPic.splice(e,1),this.cardFile.splice(e,1)},sendCards:function(){var e=this;console.log(e.cardFile),e.$Indicator.open("提交中...");var t=new FormData;t.append("id",e.userMes.engineerVO.id),t.append("identityUploadFiles",e.cardFile),e.$axios.post("http://10.0.0.31:8080/mobile/uploadEngineerFile",t).then(function(t){e.$Indicator.close(),console.log(t),0==t.data.code&&(e.$Toast("提交成功"),e.$router.push({path:"/mine",query:{color:4}}))}).catch(function(t){e.$Indicator.close(),e.$Toast("未知错误"),console.log(t)})}},components:{WorkHeader:s.a}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cer_card"},[i("WorkHeader",[i("span",[e._v("身份认证")])]),e._v(" "),i("div",{staticStyle:{"margin-top":"7rem"}}),e._v(" "),i("ul",{staticClass:"showCardPic"},e._l(e.cardPic,function(t,a){return i("li",[i("img",{attrs:{src:t,alt:""}}),e._v(" "),i("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.delCard(a)}}})])}),0),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTwo,expression:"isTwo"}],staticClass:"card_is"},[i("input",{attrs:{type:"file",accept:"image/*",name:"",value:""},on:{change:e.upCardIs}}),e._v(" "),i("i",{staticClass:"iconfont icon-icon19"})]),e._v(" "),i("p",{staticClass:"sendCard",on:{click:function(t){return e.sendCards()}}},[e._v("提交")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.upBtn,expression:"upBtn"}],staticClass:"up_mask"})],1)},staticRenderFns:[]};var d=i("C7Lr")(o,r,!1,function(e){i("7DO7")},"data-v-02111b65",null);t.default=d.exports}});
//# sourceMappingURL=19.efce2ef4ab708ecee885.js.map