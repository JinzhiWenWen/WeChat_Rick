webpackJsonp([11],{"i+br":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("4YfN"),n=i.n(a),s=i("qqdu"),c=i("R4Sj"),r={data:function(){return{cardPic:[],cardFile:[],cardWeb:[],isTwo:!0,upBtn:!0}},watch:{publicLength:function(e,t){e>=2?(this.isTwo=!1,this.upBtn=!1):(this.isTwo=!0,this.upBtn=!0)}},computed:n()({},Object(c.c)(["userMes"]),{publicLength:function(){return this.cardPic.length+this.cardWeb.length}}),created:function(){if(this.userMes.engineerVO&&this.userMes.engineerVO.identityFiles.length>=1){var e=this.userMes.engineerVO.identityFiles;this.cardWeb=e}},mounted:function(){this.cardPic.length+this.cardWeb.length>=2?(this.isTwo=!1,this.upBtn=!1):(this.isTwo=!0,this.upBtn=!0)},methods:n()({},Object(c.b)(["userMes_fn"]),{upCardIs:function(e){var t=this,i=e.target.files[0],a=new FileReader;a.readAsDataURL(i);var n=new Image;a.onload=function(e){var i=document.createElement("canvas"),a=i.getContext("2d");n.src=this.result,n.onload=function(){i.width=400,i.height=n.height/n.width*400,a.drawImage(n,0,0,i.width,i.height),n.src=i.toDataURL("image/png",.1)},t.cardPic.push(n.src)},this.cardFile.push(e.target.files[0])},delCard:function(e){this.cardPic.splice(e,1),this.cardFile.splice(e,1)},delWebCard:function(e){var t=this,i=this;i.$Indicator.open("删除中...");var a=new FormData;a.append("id",i.cardWeb[e].id),a.append("type","identityFile"),i.$axios.post(i.oUrl+"/mobile/deleteEngineerFile",a).then(function(e){0==e.data.code?(i.$Indicator.close(),i.$Toast("删除成功"),i.userMes_fn(e.data.data),e.data.data.engineerVO.certificateFiles.length>=1&&(t.cardWeb=e.data.data.engineerVO.certificateFiles)):(i.$Indicator.close(),i.$Toast(e.data.msg))}).catch(function(e){i.$Toast("未知错误"),console.log(e)})},sendCards:function(){var e=this;e.$Indicator.open("提交中...");var t=new FormData;t.append("id",e.userMes.engineerVO.id),t.append("identityUploadFiles",e.cardFile[0]),t.append("identityUploadFiles",e.cardFile[1]),e.$axios.post(e.oUrl+"/mobile/uploadEngineerFile",t).then(function(t){0==t.data.code&&(e.$Indicator.close(),e.userMes_fn(t.data.data),e.$Toast("提交成功"),e.$router.push({path:"/mine",query:{color:4}}))}).catch(function(t){e.$Indicator.close(),e.$Toast("未知错误"),console.log(t)})}}),components:{WorkHeader:s.a}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cer_card"},[i("WorkHeader",[i("span",[e._v("身份认证")])]),e._v(" "),i("div",{staticStyle:{"margin-top":"7rem"}}),e._v(" "),i("ul",{staticClass:"showCardPic"},e._l(e.cardWeb,function(t,a){return i("li",[i("img",{attrs:{src:e.oUrl+"/"+t.fileName,alt:""}}),e._v(" "),i("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.delWebCard(a)}}})])}),0),e._v(" "),i("ul",{staticClass:"showCardPic"},e._l(e.cardPic,function(t,a){return i("li",[i("img",{attrs:{src:t,alt:""}}),e._v(" "),i("i",{staticClass:"iconfont icon-guanbi",on:{click:function(t){return e.delCard(a)}}})])}),0),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTwo,expression:"isTwo"}],staticClass:"card_is"},[i("input",{attrs:{type:"file",accept:"image/*",name:"",value:""},on:{change:e.upCardIs}}),e._v(" "),i("i",{staticClass:"iconfont icon-icon19"})]),e._v(" "),i("p",{staticClass:"sendCard",on:{click:function(t){return e.sendCards()}}},[e._v("提交")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.upBtn,expression:"upBtn"}],staticClass:"up_mask"})],1)},staticRenderFns:[]};var d=i("C7Lr")(r,o,!1,function(e){i("oqw3")},"data-v-66ddee9c",null);t.default=d.exports},oqw3:function(e,t){}});
//# sourceMappingURL=11.80269d2c5d34a05c300e.js.map